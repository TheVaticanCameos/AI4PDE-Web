<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDE Solver Diffusion-Reaction Equation</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

    <link rel="icon" href="logo.png" type="image/x-icon">
    
    <style>
        /* 通用样式 */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
            background: #000000;
            position: relative;
            scroll-behavior: smooth;
            overflow: auto;
        }

        .container {
            position: relative;
            z-index: 3;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow: auto;
        }

        /* 漂浮动画 */
        @keyframes float {
            0% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0);
            }
        }

        /* 顶部导航栏样式 */
        header {
            display: flex;
            justify-content: space-between;
            top : 0;
            position: fixed;
            align-items: center;
            width: 100vw;
            padding: 20px 50px 20px 50px;
            background: rgba(0, 0, 0, 0.619);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 3;
        }

        header .logo {
            font-size: 24px;
            font-weight: bold;
            color: #0ff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        header nav {
            position: absolute;
            right: 10vw;
            align-items: center;
        }

        header nav a {
            margin-left: 30px;
            margin-right: 3vw;
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        header nav a:hover {
            color: #0ff;
        }

        /* 介绍板块样式 */
        .output {
            position: absolute;
            left: 30vw;
            top: 20vh;
            text-align: center;
            z-index: 2;
            align-items: center;
            color: #0ff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
            text-decoration: none;
            font-size: 20px;
            padding:30px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            letter-spacing: 3px;
            width: 35vw;
            line-height: 30px;
            overflow: auto; /* 确保内容超出时可以滚动 */
            min-height: 200px; /* 示例最小高度 */
    }


        

        /* 自定义滚动条样式 */
        .main::-webkit-scrollbar {
            width: 12px; /* 滚动条宽度 */
        }

        .main::-webkit-scrollbar-track {
            background: #34424c90; /* 滚动条轨道背景颜色 */
        }

        .main::-webkit-scrollbar-thumb {
            background: #32d2dd; /* 滚动条滑块背景颜色 */
            border-radius: 6px; /* 滚动条滑块圆角 */
        }

        .main::-webkit-scrollbar-thumb:hover {
            background: #07748c; /* 滚动条滑块悬停时的背景颜色 */
        }


        /* 按钮样式 */
        button {
            padding: 10px 20px;
            margin-top: 2%;
            margin-bottom: 2%;
            font-size: 16px;
            color: #ffffff;
            background-color: #60bcc2; /* 默认为蓝色 */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #97c6ce;
        }

        /* 粒子背景 */
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* 粒子背景层次最低 */
        }

        /* 底部样式 */
        footer {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            height: 30px;
            text-align: center;
            position: fixed;
            width: 100%;
            bottom: 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        footer p, footer a {
            color: #ccc;
            margin: 0;
            padding: 0;
            text-decoration: none;
            font-size: 14px;
        }

        footer a:hover {
            color: #0ff;
            z-index: 3;
        }

</style>


</head>
<body>
    <!-- 粒子背景 -->
    <div id="particles-js"></div>

    <!-- 主内容容器 -->
    <div class="container">
        <!-- 顶部导航栏 -->
        <header>
            <div class="logo">PDE Solver</div>
            <nav>
                <a href="menu.html">Home</a>
                <a href="#">About Us</a>
                <a href="#">Help</a>
                <a href="#">Contact</a>
            </nav>
        </header>

        <!-- 输入板块 -->
        <main>
        <div class="output">
            <div id="imageCanvas" style="width: 100%; height: 80%;"></div>
            
            <form id="csv-input" action="/upload" method="post" enctype="multipart/form-data">
                <input type="file" id="file-input-csv" accept=".csv" />
                <br>
                <button type="button" onclick="uploadFile1()">上传csv文件</button>
            </form>
    
    
            <form id="txt-input" action="/upload" method="post" enctype="multipart/form-data">
                <input type="file" id="file-input-txt" accept=".txt" />
                <br>
                <button type="button" onclick="uploadFile2()">上传txt文件</button>
            </form>

        </div>
    </main>
        


        <!-- 底部版权信息 -->
        <footer>
            <p>&copy; 2024 PDE Solver. All Rights Reserved.</p>
            <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS('particles-js', {
    particles: {
      number: {
        value: 80,
        density: {
          enable: true,
          value_area: 800
        }
      },
      color: {
        value: '#0ff'
      },
      shape: {
        type: 'circle',
        stroke: {
          width: 0,
          color: '#000000'
        }
      },
      opacity: {
        value: 0.5,
        random: true,
        anim: {
          enable: false,
          speed: 1,
          opacity_min: 0.1,
          sync: false
        }
      },
      size: {
        value: 3,
        random: true,
        anim: {
          enable: false,
          speed: 40,
          size_min: 0.1,
          sync: false
        }
      },
      line_linked: {
        enable: true,
        distance: 150,
        color: '#0ff',
        opacity: 0.4,
        width: 1
      },
      move: {
        enable: true,
        speed: 6,
        direction: 'none',
        random: false,
        straight: false,
        out_mode: 'out',
        bounce: false,
        attract: {
          enable: false,
          rotateX: 600,
          rotateY: 1200
        }
      }
    },
    interactivity: {
      detect_on: 'canvas',
      events: {
        onhover: {
          enable: true,
          mode: 'repulse'
        },
        onclick: {
          enable: true,
          mode: 'push'
        },
        resize: true
      },
      modes: {
        grab: {
          distance: 400,
          line_linked: {
            opacity: 1
          }
        },
        bubble: {
          distance: 400,
          size: 40,
          duration: 2,
          opacity: 8,
          speed: 3
        },
        repulse: {
          distance: 200,
          duration: 0.4
        },
        push: {
          particles_nb: 4
        },
        remove: {
          particles_nb: 2
        }
      }
    },
    retina_detect: true,
    z_index: 1
  });


  // 上传文件
async function uploadFile1() {
    const fileInput = document.getElementById('file-input-csv');
    const file = fileInput.files[0];
    if (!file) {
        alert('请选择一个文件');
        return;
    }
    if (!file.name.endsWith('.csv')) {
        alert('请选择一个 CSV 文件');
        return;
    }
    const formData = new FormData();
    formData.append('file', file);

    try {
        const response = await fetch('/upload', {
            method: 'POST',
            body: formData
        });
        if (!response.ok) {
            throw new Error('网络响应失败');
        }
        const data = await response.json();
        console.log('文件上传成功:', data);
    } catch (error) {
        console.error('文件上传失败:', error);
    }
}


async function uploadFile2() {
    const fileInput = document.getElementById('file-input-txt');
    const file = fileInput.files[0];
    if (!file) {
        alert('请选择一个文件');
        return;
    }
    if (!file.name.endsWith('.txt')) {
        alert('请选择一个 TXT 文件');
        return;
    }
    const formData = new FormData();
    formData.append('file', file);

    try {
        const response = await fetch('/upload', {
            method: 'POST',
            body: formData
        });
        if (!response.ok) {
            throw new Error('网络响应失败');
        }
        const data = await response.json();
        console.log('文件上传成功:', data);
    } catch (error) {
        console.error('文件上传失败:', error);
    }
}


    </script>
</body>
</html>
